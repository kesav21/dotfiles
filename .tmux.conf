# vim: set foldmethod=marker:

set -g prefix M-Space

# set-option -g prefix Super_L
set -g base-index 1
set -g mouse on
set -g @continuum-restore 'on'

# unbind-key -a
# unbind-key -an
# unbind-key -aT copy-mode
# unbind-key -aT copy-mode-vi

# keybindings/misc {{{

bind	M-Space		send-prefix
bind -n C-p			command-prompt
bind -n C-R			source-file ~/.tmux.conf; display-message "sourced .tmux.conf"

# }}}

# keybindings/panes {{{

# courtesy of https://github.com/saysjonathan/dwm.tmux

# new pane (in current directory)
bind -n C-n split-window -t :.0 -c "#{pane_current_path}" \;\
              swap-pane -s :.0 -t :.1 \;\
              select-layout main-vertical \;\
              run "tmux resize-pane -t :.0 -x \"$(echo \"#{window_width}/2/1\" | bc)\""
# kill pane
bind -n C-w   kill-pane -t :. \;\
              select-layout main-vertical \;\
              run "tmux resize-pane -t :.0 -x \"$(echo \"#{window_width}/2/1\" | bc)\"" \;\
              select-pane -t :.0
# previous/next pane
bind -n C-k   select-pane -t :.-
bind -n C-j   select-pane -t :.+
# make master pane
bind    Space swap-pane -s :. -t :.0 \; select-pane -t :.0
# zoom pane
bind -n C-f   resize-pane -Z
# resize pane
bind -n C-h   resize-pane -L 5
bind -n C-l   resize-pane -R 5

# }}}

# keybindings/windows {{{

bind -n C-N new-window
bind	,	command-prompt -I "#W" "rename-window '%%'"

bind	0	select-window -t :=0
bind	1	select-window -t :=1
bind	2	select-window -t :=2
bind	3	select-window -t :=3
bind	4	select-window -t :=4
bind	5	select-window -t :=5
bind	6	select-window -t :=6
bind	7	select-window -t :=7
bind	8	select-window -t :=8
bind	9	select-window -t :=9

# }}}

# keybindings/sessions {{{

bind	%	command-prompt -I "#S" "rename-session '%%'"
bind	d	detach-client
bind	s	choose-tree -s

# }}}

# keybindings/plugins {{{

# bind	I	run-shell /home/kesav/.tmux/plugins/tpm/bindings/install_plugins
# bind	U	run-shell /home/kesav/.tmux/plugins/tpm/bindings/update_plugins
# bind	C	run-shell /home/kesav/.tmux/plugins/tpm/bindings/clean_plugins

# }}}

# keybindings/copy-mode {{{

bind	[	copy-mode
bind	P	paste-buffer

bind -T copy-mode-vi	v	send-keys -X begin-selection
bind -T copy-mode-vi	y	send-keys -X copy-selection
bind -T copy-mode-vi	r	send-keys -X rectangle-toggle

# }}}

# keybindings/scrollback {{{

bind -T root	WheelUpPane		if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; copy-mode -e; send-keys -M"
bind -T root	WheelDownPane	if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; send-keys -M"

# }}}

# status bar {{{

set-option -g pane-active-border-style fg=white,bg=default
set-option -g pane-border-style fg=black,bg=default

set-option -g message-style bg=black,fg=white

set-option -g message-command-style bg=yellow,fg=yellow

set-option -g status-style bg=black,fg=white

set-option -g status "on"

set-option -g status-left "#[fg=black,bg=cyan, bold] #S "
set-option -g status-right ""

set-window-option -g window-status-current-format "#[fg=black,bg=white] #I #W "
set-window-option -g window-status-format "#[fg=white,bg=black] #I #W "

# }}}

# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-resurrect'
# set -g @plugin 'tmux-plugins/tmux-continuum'
# set -g @plugin 'egel/tmux-gruvbox'

# run -b '~/.tmux/plugins/tpm/tpm'

